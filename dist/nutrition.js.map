{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/js/index.js","nutrition.js","src/js/carbController.js","src/js/carbFactory.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"CarbController","CarbFactory","angular","module","factory","controller","./carbController","./carbFactory",2,"cf","vm","this","search","prevSearch","words","weight","then","data","food","results","loadMore","getNext","next","concat","clear",3,"calcMacro","macro","isPercentage","Math","round","Number","toFixed","$http","$location","findFood","url","undefined","mass","get","res","none","foods","more","links","unit","map","name","carbs","carbohydrate","defaults","useXDomain","headers","common","isLocal","host","localhost","webhost","terms","split","join","req"],"mappings":"CAAA,QAAAA,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAK,GAAA,GAAAC,OAAA,uBAAAN,EAAA,IAAA,MAAAK,GAAAE,KAAA,mBAAAF,EAAA,GAAAG,GAAAX,EAAAG,IAAAS,WAAAb,GAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAS,QAAA,IAAA,GAAAL,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAa,GAAA,SAAAT,GCAA,GAAAU,GAAAV,EAAA,oBACAW,EAAAX,EAAA,gBAEAY,SAAAC,OAAA,gBACAC,QAAA,eAAA,QAAA,YAAAH,IACAI,WAAA,kBAAA,cAAAL,MCGGM,mBAAmB,EAAEC,gBAAgB,IAAIC,GAAG,SAASlB,EAAQa,GCNhE,QAAAH,GAAAC,GACA,GAAAQ,GAAAR,EACAS,EAAAC,IAEAD,GAAAE,OAAA,WACAF,EAAAG,WAAAH,EAAAI,MACAL,EAAAG,OAAAF,EAAAI,MAAAJ,EAAAK,QACAC,KAAA,SAAAC,GACAP,EAAAQ,KAAAD,EAAAC,KACAR,EAAAS,QAAAF,EAAAE,WAIAT,EAAAU,SAAA,WACAX,EAAAY,QAAAX,EAAAS,QAAAG,KAAAZ,EAAAK,QACAC,KAAA,SAAAC,GACAP,EAAAS,QAAAF,EAAAE,QACAT,EAAAQ,KAAAR,EAAAQ,KAAAK,OAAAN,EAAAC,SAIAR,EAAAc,MAAA,iBACAd,GAAAQ,WACAR,GAAAS,SAzBAhB,EAAAP,QAAAI,ODsCMyB,GAAG,SAASnC,EAAQa,GEpC1B,QAAAuB,GAAAC,EAAAZ,EAAAa,GACA,MAAAA,GACAC,KAAAC,MAAAH,EAAAZ,EAAA,KAEAgB,OAAAJ,EAAAZ,GAAAiB,QAAA,GAIA,QAAA/B,GAAAgC,EAAAC,GAWA,QAAAC,GAAAC,EAAArB,GACA,GAAAa,GAAAS,SAAAtB,EACAuB,EAAAvB,GAAA,CAEA,OAAAkB,GAAAM,IAAAH,GACApB,KAAA,SAAAwB,GACA,GAAAvB,GAAAuB,EAAAvB,IACA,QACAE,SACAsB,KAAA,IAAAxB,EAAAyB,MAAA5C,OACA6C,KAAAN,SAAApB,EAAA2B,MAAAtB,KACAuB,KAAAjB,EAAA,IAAA,IACAN,KAAAL,EAAA2B,MAAAtB,MAEAJ,KAAAD,EAAAyB,MAAAI,IAAA,SAAA5B,GACA,OACA6B,KAAA7B,EAAA6B,KACAC,MAAAtB,EAAAR,EAAA+B,aAAAX,EAAAV,SAzBAK,EAAAiB,SAAAC,YAAA,QACAlB,GAAAiB,SAAAE,QAAAC,OAAA,mBAEA,IAAAC,GAAA,cAAApB,EAAAqB,OACAC,EAAA,0BACAC,EAAA,+BACAF,GAAAD,EAAAE,EAAAC,GAAA,sBA0BA,QACA7C,OAAA,SAAAA,EAAAG,GACA,GAAA2C,GAAA9C,EAAA+C,MAAA,KAAAC,KAAA,KACAC,EAAAN,EAAAG,CACA,OAAAvB,GAAA0B,EAAA9C,IAEAM,QAAAc,GAnDAhC,EAAAP,QAAAK,YF+FW","file":"nutrition.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var CarbController = require('./carbController');\nvar CarbFactory = require('./carbFactory');\n\nangular.module('nutrition', [])\n  .factory('CarbFactory', ['$http', '$location', CarbFactory])\n  .controller('CarbController', ['CarbFactory', CarbController])\n",null,"module.exports = CarbController;\n\nfunction CarbController(CarbFactory) {\n  var cf = CarbFactory;\n  var vm = this;\n\n  vm.search = function() {\n    vm.prevSearch = vm.words;\n    cf.search(vm.words, vm.weight)\n      .then(function(data) {\n        vm.food = data.food;\n        vm.results = data.results;\n      });\n  };\n\n  vm.loadMore = function() {\n    cf.getNext(vm.results.next, vm.weight)\n      .then(function(data) {\n        vm.results = data.results;\n        vm.food = vm.food.concat(data.food);\n      });\n  };\n\n  vm.clear = function(form) {\n    delete vm.food;\n    delete vm.results;\n  };\n}\n","module.exports = CarbFactory;\n\nfunction calcMacro(macro, weight, isPercentage) {\n  if (isPercentage) {\n    return Math.round(macro * weight * 100);\n  } else {\n    return Number(macro * weight).toFixed(2);\n  }\n}\n\nfunction CarbFactory($http, $location) {\n\n  // CORS stuff\n  $http.defaults.useXDomain = true;\n  delete $http.defaults.headers.common['X-Requested-With'];\n\n  var isLocal = ($location.host() === 'localhost');\n  var localhost = 'http://localhost:50000/';\n  var webhost = 'https://api.damonmcminn.com/';\n  var host = (isLocal ? localhost : webhost) + 'nutrition/food?name=';\n  \n  function findFood(url, weight) {\n    var isPercentage = (weight === undefined);\n    var mass = weight || 1;\n\n    return $http.get(url)\n      .then(function(res) {\n        var data = res.data;\n        return {\n          results: {\n            none: (data.foods.length === 0),\n            more: (data.links.next !== undefined),\n            unit: isPercentage ? '%' : 'g',\n            next: data.links.next\n          },\n          food: data.foods.map(function(food) {\n            return {\n              name: food.name,\n              carbs: calcMacro(food.carbohydrate, mass, isPercentage)\n            }\n          })\n        }\n      });\n  }\n\n  return {\n    search: function(search, weight) {\n      var terms = search.split(' ').join('-');            \n      var req = host + terms;\n      return findFood(req, weight);\n    },\n    getNext: findFood,\n  }\n}\n      \n"],"sourceRoot":"/source/"}